{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./hero-list.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./hero-list.component.scss?ngResource\";\nimport { Component, ViewChild } from '@angular/core';\nimport { HeroesService } from '../../../core/services/heroes.service';\nimport { Router } from '@angular/router';\nimport { MatPaginator } from '@angular/material/paginator';\nlet HeroListComponent = class HeroListComponent {\n  heroesService;\n  router;\n  displayedColumns = ['id', 'name', 'power', 'description', 'actions'];\n  heroes = [];\n  searchSub;\n  pageSize = 5;\n  pageIndex = 0;\n  paginator;\n  constructor(heroesService, router) {\n    this.heroesService = heroesService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.heroes = this.heroesService.getHeroesArray();\n  }\n  // Casteamos $event para evitar error \"value no existe en EventTarget\"\n  onSearch(event) {\n    const input = event.target;\n    const term = input.value ?? '';\n    // Llamamos al service\n    this.heroesService.searchHeroes(term);\n    // Resuscribimos searchResults$ para ver resultados\n    if (this.searchSub) {\n      this.searchSub.unsubscribe();\n    }\n    this.searchSub = this.heroesService.searchResults$.subscribe(filtered => {\n      this.heroes = filtered;\n      this.pageIndex = 0;\n    });\n  }\n  onAddHero() {\n    this.router.navigate(['/heroes/create']);\n  }\n  onEditHero(id) {\n    this.router.navigate(['/heroes/edit', id]);\n  }\n  onDeleteHero(id) {\n    if (confirm('¿Borrar héroe?')) {\n      this.heroesService.deleteHero(id);\n      this.heroes = this.heroesService.getHeroesArray();\n    }\n  }\n  onPageChange(event) {\n    this.pageIndex = event.pageIndex;\n    this.pageSize = event.pageSize;\n  }\n  get pagedHeroes() {\n    const startIndex = this.pageIndex * this.pageSize;\n    return this.heroes.slice(startIndex, startIndex + this.pageSize);\n  }\n  ngOnDestroy() {\n    this.searchSub?.unsubscribe();\n  }\n  static ctorParameters = () => [{\n    type: HeroesService\n  }, {\n    type: Router\n  }];\n  static propDecorators = {\n    paginator: [{\n      type: ViewChild,\n      args: [MatPaginator]\n    }]\n  };\n};\nHeroListComponent = __decorate([Component({\n  selector: 'app-hero-list',\n  template: __NG_CLI_RESOURCE__0,\n  standalone: false,\n  styles: [__NG_CLI_RESOURCE__1]\n})], HeroListComponent);\nexport { HeroListComponent };","map":{"version":3,"names":["Component","ViewChild","HeroesService","Router","MatPaginator","HeroListComponent","heroesService","router","displayedColumns","heroes","searchSub","pageSize","pageIndex","paginator","constructor","ngOnInit","getHeroesArray","onSearch","event","input","target","term","value","searchHeroes","unsubscribe","searchResults$","subscribe","filtered","onAddHero","navigate","onEditHero","id","onDeleteHero","confirm","deleteHero","onPageChange","pagedHeroes","startIndex","slice","ngOnDestroy","args","__decorate","selector","template","__NG_CLI_RESOURCE__0","standalone"],"sources":["/Users/naranjax/app-heroes/src/app/heroes/components/hero-list/hero-list.component.ts"],"sourcesContent":["import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { Hero } from '../../../core/models/hero.model';\nimport { HeroesService } from '../../../core/services/heroes.service';\nimport { Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { MatPaginator } from '@angular/material/paginator';\n\n@Component({\n  selector: 'app-hero-list',\n  templateUrl: './hero-list.component.html',\n  standalone: false,\n  styleUrls: ['./hero-list.component.scss']\n})\nexport class HeroListComponent implements OnInit, OnDestroy {\n  displayedColumns: string[] = ['id', 'name', 'power', 'description', 'actions'];\n  heroes: Hero[] = [];\n  private searchSub?: Subscription;\n\n  pageSize = 5;\n  pageIndex = 0;\n\n  @ViewChild(MatPaginator) paginator!: MatPaginator;\n\n  constructor(private heroesService: HeroesService, private router: Router) {}\n\n  ngOnInit(): void {\n    this.heroes = this.heroesService.getHeroesArray();\n  }\n\n  // Casteamos $event para evitar error \"value no existe en EventTarget\"\n  onSearch(event: Event) {\n    const input = event.target as HTMLInputElement;\n    const term = input.value ?? '';\n    // Llamamos al service\n    this.heroesService.searchHeroes(term);\n\n    // Resuscribimos searchResults$ para ver resultados\n    if (this.searchSub) {\n      this.searchSub.unsubscribe();\n    }\n    this.searchSub = this.heroesService.searchResults$.subscribe(filtered => {\n      this.heroes = filtered;\n      this.pageIndex = 0;\n    });\n  }\n\n  onAddHero() {\n    this.router.navigate(['/heroes/create']);\n  }\n\n  onEditHero(id: number) {\n    this.router.navigate(['/heroes/edit', id]);\n  }\n\n  onDeleteHero(id: number) {\n    if (confirm('¿Borrar héroe?')) {\n      this.heroesService.deleteHero(id);\n      this.heroes = this.heroesService.getHeroesArray();\n    }\n  }\n\n  onPageChange(event: any) {\n    this.pageIndex = event.pageIndex;\n    this.pageSize = event.pageSize;\n  }\n\n  get pagedHeroes(): Hero[] {\n    const startIndex = this.pageIndex * this.pageSize;\n    return this.heroes.slice(startIndex, startIndex + this.pageSize);\n  }\n\n  ngOnDestroy() {\n    this.searchSub?.unsubscribe();\n  }\n}\n"],"mappings":";;;AAAA,SAASA,SAAS,EAAqBC,SAAS,QAAQ,eAAe;AAEvE,SAASC,aAAa,QAAQ,uCAAuC;AACrE,SAASC,MAAM,QAAQ,iBAAiB;AAExC,SAASC,YAAY,QAAQ,6BAA6B;AAQnD,IAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAURC,aAAA;EAAsCC,MAAA;EAT1DC,gBAAgB,GAAa,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,aAAa,EAAE,SAAS,CAAC;EAC9EC,MAAM,GAAW,EAAE;EACXC,SAAS;EAEjBC,QAAQ,GAAG,CAAC;EACZC,SAAS,GAAG,CAAC;EAEYC,SAAS;EAElCC,YAAoBR,aAA4B,EAAUC,MAAc;IAApD,KAAAD,aAAa,GAAbA,aAAa;IAAyB,KAAAC,MAAM,GAANA,MAAM;EAAW;EAE3EQ,QAAQA,CAAA;IACN,IAAI,CAACN,MAAM,GAAG,IAAI,CAACH,aAAa,CAACU,cAAc,EAAE;EACnD;EAEA;EACAC,QAAQA,CAACC,KAAY;IACnB,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAA0B;IAC9C,MAAMC,IAAI,GAAGF,KAAK,CAACG,KAAK,IAAI,EAAE;IAC9B;IACA,IAAI,CAAChB,aAAa,CAACiB,YAAY,CAACF,IAAI,CAAC;IAErC;IACA,IAAI,IAAI,CAACX,SAAS,EAAE;MAClB,IAAI,CAACA,SAAS,CAACc,WAAW,EAAE;IAC9B;IACA,IAAI,CAACd,SAAS,GAAG,IAAI,CAACJ,aAAa,CAACmB,cAAc,CAACC,SAAS,CAACC,QAAQ,IAAG;MACtE,IAAI,CAAClB,MAAM,GAAGkB,QAAQ;MACtB,IAAI,CAACf,SAAS,GAAG,CAAC;IACpB,CAAC,CAAC;EACJ;EAEAgB,SAASA,CAAA;IACP,IAAI,CAACrB,MAAM,CAACsB,QAAQ,CAAC,CAAC,gBAAgB,CAAC,CAAC;EAC1C;EAEAC,UAAUA,CAACC,EAAU;IACnB,IAAI,CAACxB,MAAM,CAACsB,QAAQ,CAAC,CAAC,cAAc,EAAEE,EAAE,CAAC,CAAC;EAC5C;EAEAC,YAAYA,CAACD,EAAU;IACrB,IAAIE,OAAO,CAAC,gBAAgB,CAAC,EAAE;MAC7B,IAAI,CAAC3B,aAAa,CAAC4B,UAAU,CAACH,EAAE,CAAC;MACjC,IAAI,CAACtB,MAAM,GAAG,IAAI,CAACH,aAAa,CAACU,cAAc,EAAE;IACnD;EACF;EAEAmB,YAAYA,CAACjB,KAAU;IACrB,IAAI,CAACN,SAAS,GAAGM,KAAK,CAACN,SAAS;IAChC,IAAI,CAACD,QAAQ,GAAGO,KAAK,CAACP,QAAQ;EAChC;EAEA,IAAIyB,WAAWA,CAAA;IACb,MAAMC,UAAU,GAAG,IAAI,CAACzB,SAAS,GAAG,IAAI,CAACD,QAAQ;IACjD,OAAO,IAAI,CAACF,MAAM,CAAC6B,KAAK,CAACD,UAAU,EAAEA,UAAU,GAAG,IAAI,CAAC1B,QAAQ,CAAC;EAClE;EAEA4B,WAAWA,CAAA;IACT,IAAI,CAAC7B,SAAS,EAAEc,WAAW,EAAE;EAC/B;;;;;;;;YApDCvB,SAAS;MAAAuC,IAAA,GAACpC,YAAY;IAAA;;;AARZC,iBAAiB,GAAAoC,UAAA,EAN7BzC,SAAS,CAAC;EACT0C,QAAQ,EAAE,eAAe;EACzBC,QAAA,EAAAC,oBAAyC;EACzCC,UAAU,EAAE,KAAK;;CAElB,CAAC,C,EACWxC,iBAAiB,CA6D7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}